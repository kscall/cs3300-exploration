<!-- inherit from base.html -->
{% extends 'food_app/base_template.html' %}
{% load static %}

{% block content %}
  <style>
    body {
      background-color: rgb(219, 205, 200);
    }
    
    .profile-header {
      display: flex;
    }

    .review-list {
      border-color: rgb(67,30,10);
      border-style: solid;
      border-width: 5px;
    }
  </style>

  {% if profile.is_private and profile.user.username != user.username %}

    <h3 style="margin-top: 50px">This user's profile is private.</h3>

  {% else %}

    <!-- Display review image if the user chose to upload one (images are optional) -->
    {% if profile.image %}
      <img class="rounded-circle article-img" src="{{ profile.image.url }}" height="200" width="200" alt="{{ profile.name }}'s Profile Picture" />
    {% else %}
      <img src="{% static 'images/default-pfp.png' %}" height="200" width="200" alt="Default Review Image" />
    {% endif %}

    <div class="profile-header">
      <h1>{{ profile.user }}'s Profile</h1>
      {% if profile.user.username == user.username %}
        <a class="btn btn-primary" href="{% url 'update-profile' %}" style="margin-left: 20px; margin-top: 5px; height: 40px;" role="Edit Profile">Edit Profile</a>
      {% endif %}
    </div>

    {% if profile.biography %}
      <p><strong>About: </strong>{{ profile.biography }}</p>
    {% endif %}

    
    {% if review_list %}
      <div class="review-list">
        <h3>Reviews</h3>

        {% for review in review_list %}
          <table class="table table-hover">
            <thead>
              <tr>
                <th scope="col">Food</th>
                <th scope="col">Rating</th>
                <th scope="col">Image</th>
                <th scope="col">Details</th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <th scope="row">
                  <h3>{{ review.name }}</h3>
                </th>

                <td>
                  <!-- Displays star rating based on the 1-5 value user entered for a numeric rating of the food -->
                  {% if review.rating == 1 %}
                    <img src="{% static 'images/Star_rating_1_of_5.png' %}" />
                  {% elif review.rating == 2 %}
                    <img src="{% static 'images/Star_rating_2_of_5.png' %}" />
                  {% elif review.rating == 3 %}
                    <img src="{% static 'images/Star_rating_3_of_5.png' %}" />
                  {% elif review.rating == 4 %}
                    <img src="{% static 'images/Star_rating_4_of_5.png' %}" />
                  {% elif review.rating == 5 %}
                    <img src="{% static 'images/Star_rating_5_of_5.png' %}" />
                  {% endif %}
                </td>

                <td>
                  <!-- Display review image if user chose to upload one (images are optional) -->
                  {% if review.image %}
                    <img src="{{ review.image.url }}" height="200" width="300" alt="{{ review.name }} Image" />
                  {% else %}
                    <img src="{% static 'images/default-img.png' %}" alt="Default Review Image" />
                  {% endif %}
                </td>

                <!-- Direct user to review detail page -->
                <td>
                  <a class="btn btn-primary btn-lg" href="{{ review.get_absolute_url }}" role="button">View</a>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      {% endfor %}

    {% else %}
      <p>This user has no food reviews.</p>
    {% endif %}

  {% endif %}

{% endblock %}
